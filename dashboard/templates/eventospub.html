{% extends "public_layout.html" %}
{% load static %}
{% block title %}ISACA Student Group – Eventos{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto"  rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Outfit" rel="stylesheet">
<style>
  body { font-family:'Roboto',sans-serif; overflow-x:hidden; }
  .card        { display:flex; flex-direction:row; align-items:center; gap:15px; }
  .card img    { width:200px; height:auto; object-fit:cover; }
  .card-body   { flex:1; }
</style>
{% endblock %}

{% block content %}
<div>
  <h1 class="text-center fw-semibold"
      style="font-size:67px; color:#0D2C6C; font-family:'Outfit',sans-serif;">
      Eventos
  </h1>
</div>

<div class="container my-5">
  <div class="row row-cols-1 row-cols-md-2 g-4">

    {% for ev in eventos %}
    <div class="col d-flex">
      <div class="card shadow-sm mx-auto w-100">

        {# -------- Dispositivos pequenos (≤ sm) -------- #}
        <div class="d-sm-block d-lg-none text-center w-100">
          <img class="card-img-top img-fluid mb-3 mx-auto"
               src="{{ ev.image_url }}" alt="{{ ev.nome }}"
               style="max-height:200px; object-fit:cover;">
          <div class="card-body">
            <h5 class="card-title fw-bold">{{ ev.nome }}</h5>
            <p class="card-text text-muted">Data: {{ ev.data|date:"Y-m-d" }}</p>
            {% if ev.descricao %}
              <p class="card-text"><strong>Descrição: </strong>{{ ev.descricao }}</p>
            {% endif %}
            <a href="{% url 'dashboard:evento_detail' ev.id %}"
               class="cta-button btn btn-primary">Detalhes</a>
          </div>
        </div>

        {# -------- Layout padrão ≥ lg -------- #}
        <div class="d-none d-lg-flex w-100">
          <img class="card-img-top border-end border-5"
               src="{{ ev.image_url }}" alt="{{ ev.nome }}">
          <div class="card-body">
            <h5 class="card-title fw-bold">{{ ev.nome }}</h5>
            <p class="card-text text-muted">Data: {{ ev.data|date:"Y-m-d" }}</p>
            {% if ev.descricao %}
              <p class="card-text"><strong>Descrição: </strong>{{ ev.descricao }}</p>
            {% endif %}
            <a href="{% url 'dashboard:evento_detail' ev.id %}"
               class="cta-button btn btn-primary">Detalhes</a>
          </div>
        </div>

      </div>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="alert alert-info text-center" role="alert">
        Nenhum evento disponível no momento.
      </div>
    </div>
    {% endfor %}

  </div>
</div>
{% endblock %}
